<%- include ../layouts/header.ejs %>
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyDSlhXQ8ixpBW6CLmCJWOIvQXmwzXwlbj4&callback=initMap" type="text/javascript"></script>
<style>
    span.urgent {
            font: 11px/14px "Helvetica Neue", Helvetica, Arial, sans-serif;
            background: red;
            -webkit-border-radius: 3px;
            -moz-border-radius: 3px;
            border-radius: 3px;
            -moz-background-clip: padding;
            -webkit-background-clip: padding-box;
            background-clip: padding-box;
            color: #fff;
            float: left;
            font-weight: 700;
            margin: 5px 10px 0 0;
            padding: 2px 4px;
            text-transform: uppercase;
        }
        
        input#UrgentInDetails {
            min-width: 8px;
            min-height: 8px;
            padding: 0;
            height: 17px;
            width: 16px;
            margin: 0 15px 0 0;
            background-size: 70%;
            float: left;
        }
        
        span.price {
            font-size: 12px;
        }
        
        p.msgshow {
            clear: both;
            /* margin: 5px 0 0; */
            width: 100%;
            font-weight: 500;
            font-size: 10px;
        }
        
        
    </style>
<section class="page-title parallax parallax1">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="page-title-heading">
                    Add Listing
                </div>
                <ul class="breadcrumbs">
                    <li>
                        <a href="index.html" title="">Home</a>
                        <span class="arrow_right"></span>
                    </li>
                    <li>
                        Pages
                    </li>
                </ul>
            </div>
            <!-- /.col-md-12 -->
        </div>
        <!-- /.row -->
    </div>
    <!-- /.container -->
    <div class="overlay"></div>
</section>
<!-- /.page-title -->

<section class="flat-listing">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <form action="#" id="addlisting" enctype="multipart/form-data" class="form-listing" method="post"
                    accept-charset="utf-8">

                    <div class="row">
                        <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-6">
                            <label for="title">Ad. Title</label>
                            <input type="text" name="title" class="form-control" id="title" placeholder="Enter title">
                        </div>
                        <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-6">
                            <label for="category">Category</label>
                            <select name="category" class="form-control" id="category">
                                <%- categoriesf %>
                            </select>
                        </div>
                    </div>

                    <div class="row">

                        <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-6">
                            <label for="UrgentInDetails"></label>
                            <input type="checkbox" name="urgent" id="UrgentInDetails" class="calculate-total" value="true">
                            <span class="urgent">URGENT</span>
                            <p class="firsttext">7 days -$4.95</p>
                            <p class="msgshow">Let others know you are looking for quick responses.&nbsp;<a href=""
                                    target="_blank" data-helpdesk-btn="postad_pricing" data-helpdesk-article="LearnMoreUrgent"
                                    rel="noopener noreferrer">Learn More</a></p>
                        </div>

                        <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-6">
                            <label for="subcategory">Additional Category</label>
                            <select name="subcategory" class="form-control" id="subcategory">
                                <%- categoriesf %>
                            </select>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-xs-12 col-sm-10 col-md-6 col-lg-6">
                            <label for="adtype">Ad Type</label><br>
                            <label>
                                <input type="radio" name="adtype" value="offering">I am offering - You are offering an
                                item for sale<br />
                                <input type="radio" name="adtype" value="want">I want - You want to buy an item<br />
                            </label>
                        </div>

                        <div class="col-xs-12 col-sm-10 col-md-6 col-lg-6">
                            <label for="saleby">For Sale By</label><br>
                            <label>
                                <input type="radio" name="saleby" value="owner">Owner<br />
                                <input type="radio" name="saleby" value="business">Business<br />
                            </label>
                        </div>
                    </div>

                    <div class="row">
                        <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-6">
                            <label for="email">Email address</label>
                            <input type="email" name="email" class="form-control" id="email" placeholder="Enter email">
                        </div>
                        <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-6">
                            <label for="mobile_number">Mobile Number</label>
                            <input type="text" name="mobile_number" class="form-control" id="mobile_number" placeholder="7777777777">
                        </div>

                    </div>


                    <div class="row">
                        <div class="col-xs-12 col-sm-10 col-md-6 col-lg-6">
                            <label for="price">Price</label>
                            <div class="pricefield">
                                <div class="radio testr">
                                    <label class="typeofad">
                                        <input type="radio" name="price" value="">
                                        <input type="text" name="price" class="priceadd" style="width: 20%;height: 27px;">
                                    </label>

                                </div>
                                <div class="radio testr">
                                    <label class="typeofad">
                                        <input type="radio" name="price" value="free">FREE</label>
                                </div>
                                <div class="radio testr">
                                    <label class="typeofad">
                                        <input type="radio" name="price" value="contact">Please Contact</label>
                                </div>
                                <div class="radio testr">
                                    <label class="typeofad">
                                        <input type="radio" name="price" value="swaptrade">Swap/Trade</label>

                                </div>
                            </div>
                            </label>
                        </div>


                        <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-6">
                            <label for="description">Description</label>
                            <textarea name="description" class="form-control" id="description"></textarea>
                        </div>
                    </div>


                    <div class="row">
                        <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-6">
                            <label for="website">Website</label>
                            <input type="text" name="website" class="form-control" id="website" placeholder="http://narmadatech.com">
                        </div>
                        <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-6">
                            <label for="location">Location</label>
                            <span class="location">
                                <span class="ti-location-pin"></span>
                                <div id="locationField">
                                    <input type="text" name="location" class="form-control" onFocus="initializeAutocomplete()"
                                        id="locality" placeholder="Location">
                                </div>
                            </span>

                        </div>
                    </div>

                    <input type="text" name="city" id="city" placeholder="City" value=""><br>
                    <input type="text" name="lat" id="latitude" placeholder="Latitude" value=""><br>
                    <input type="text" name="lng" id="longitude" placeholder="Longitude" value=""><br>
                    <input type="text" name="place_id" id="location_id" placeholder="Location Ids" value=""><br>


                    <div class="row">
                        <div class="form-group col-xs-12 col-sm-10 col-md-6 col-lg-6">
                            <label for="postimages">Gallery</label>
                            <input type="file" name="upl" id="postimages" multiple>


                            <p class="help-block">Example block-level help text here.</p>
                        </div>




                        <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-6">
                            <label for="youtube">Youtube Video</label>
                            <input type="text" name="youtube" class="form-control" id="youtube" placeholder="">
                        </div>
                    </div>





                    <div class="row">

                        <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-6">
                            <label for="promotion">Promotion</label>

                            <% plan.forEach(function(data) { %>
                            <div class="radio">
                                <label><input type="radio" class="plans" data-id="<%= (data.price!==undefined)?data.price:"
                                        ---" %>" name="promotion" value="
                                    <%= (data.slug!==undefined)?data.slug:"---" %>">
                                    <%= (data.title!==undefined)?data.title:"---" %>(
                                    <%= (data.days!==undefined)?data.days:"---" %> -
                                    <%= (data.price!==undefined)?data.price:"---" %>)</label>
                            </div>





                            <% }) %>




                        </div>
                        <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-6">
                            <label for="exampleInputEmail1">Total</label>
                            <span class="total"></span>
                        </div>
                    </div>
                    <div class="clearfix"></div>

                    <div class="clearfix"></div>
                    <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
                        <button type="submit" class="btn btn-default">Submit</button>
                    </div>
                </form>
            </div>
            <!-- /.col-md-12 -->
        </div>
        <!-- /.row -->
    </div>
    <!-- /.container -->
</section>
<!-- /.flat-listing -->

<section class="flat-row flat-subscribe">
    <div class="container">
        <div class="row">
            <div class="col-sm-7">
                <div class="subscribe-text">
                    Subscribe and be notified about new locations
                </div>
            </div>
            <!-- /.col-sm-7 -->
            <div class="col-sm-5">
                <div class="subscribe-form">
                    <form action="#" method="get" accept-charset="utf-8">
                        <div class="subscribe-content">
                            <div class="input-field">
                                <input type="email" name="yourEmail" placeholder="Your Email" />
                            </div>
                            <button><span class="arrow_right"></span></button>
                        </div>
                    </form>
                </div>
                <!-- /.subscribe-form -->
            </div>
            <!-- /.col-sm-5 -->
        </div>
        <!-- /.row -->
    </div>
    <!-- /.container -->
</section>
<!-- /.flat-subscibe -->

<%- include ../layouts/footer.ejs %>
<script src="../../front/app.js"></script>
<script src="../../front/post/submitlisting.js"></script>
<script type="text/javascript">
    function initializeAutocomplete() {
        var input = document.getElementById('locality');
        // var options = {
        //   types: ['(regions)'],
        //   componentRestrictions: {country: "IN"}
        // };
        var options = {}

        var autocomplete = new google.maps.places.Autocomplete(input, options);

        google.maps.event.addListener(autocomplete, 'place_changed', function () {
            var place = autocomplete.getPlace();
            var lat = place.geometry.location.lat();
            var lng = place.geometry.location.lng();
            var placeId = place.place_id;
            // to set city name, using the locality param
            var componentForm = {
                locality: 'short_name',
            };
            for (var i = 0; i < place.address_components.length; i++) {
                var addressType = place.address_components[i].types[0];
                if (componentForm[addressType]) {
                    var val = place.address_components[i][componentForm[addressType]];
                    document.getElementById("city").value = val;
                }
            }
            document.getElementById("latitude").value = lat;
            document.getElementById("longitude").value = lng;
            document.getElementById("location_id").value = placeId;
        });
    }
</script>
<script>
    $(".plans").click(function () {
        var data = $(this).attr("data-id");
        alert(data);
        $(".total").html('<input type="text" name="price" class="form-control" placeholder="total" value="' + data + '" disabled>');

    });

</script>